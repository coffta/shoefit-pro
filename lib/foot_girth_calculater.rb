class FootGirthCalculator
  def calculate_foot_girth
    gender = params[:gender].to_s
    # パラメータ名の組み合わせに応じてfoot_lengthとfoot_widthを取得
    if params[:foot_length_right]
      foot_length = params[:foot_length_right].to_i
      foot_girth = params[:foot_girth_load_right].to_i
    elsif params[:foot_length_left]
      foot_length = params[:foot_length_left].to_i
      foot_girth = params[:foot_girth_load_left].to_i
    elsif params[:foot_length_right_nonload]
      foot_length = params[:foot_length_right_nonload].to_i
      foot_girth = params[:foot_girth_nonload_right].to_i
    elsif params[:foot_length_left_nonload]
      foot_length = params[:foot_length_left_nonload].to_i
      foot_girth = params[:foot_girth_nonload_left].to_i
    else
    # foot_lengthかfoot_widthのどちらかが足りない場合の処理
      render :calculate_girth # 同じアクションを再度呼び出し、ビューを表示
      return
    end

    gender_chart = case gender
    when "male"
      girth_chart_male
    when "female"
      girth_chart_female
    else
      girth_chart_kids
    end

    selected_range = gender_chart.find { |size, ranges| ranges.any? { |range| range[0].include?(foot_length) && range[1].include?(foot_girth) } }

    selected_range ? selected_range[0] : nil
  end

  private
  
  def girth_chart_female 
    {
      "A" => [[193..197, 180..185], [198..202, 183..188], [203..207, 186..191], [208..212, 189..194], [213..217, 192..197], [218..222, 195..200], [223..227, 198..203], [228..232, 201..206], [233..237, 204..209], [238..242, 207..212], [243..247, 210..215], [248..252, 213..218], [253..257, 216..221], [258..262, 219..224], [263..267, 222..227], [268..272, 225..230]],
      "B" => [[193..197, 186..191], [198..202, 189..194], [203..207, 192..197], [208..212, 195..200], [213..217, 198..203], [218..222, 201..206], [223..227, 204..209], [228..232, 207..212], [233..237, 210..215], [238..242, 213..218], [243..247, 216..221], [248..252, 219..224], [253..257, 222..227], [258..262, 225..230], [263..267, 228..233], [268..272, 231..236]],
      "C" => [[193..197, 192..197], [198..202, 195..200], [203..207, 198..203], [208..212, 201..206], [213..217, 204..209], [218..222, 207..212], [223..227, 210..215], [228..232, 213..218], [233..237, 216..221], [238..242, 219..224], [243..247, 222..227], [248..252, 225..230], [253..257, 228..233], [258..262, 231..236], [263..267, 234..239], [268..272, 237..242]],
      "D" => [[193..197, 198..203], [198..202, 201..206], [203..207, 204..209], [208..212, 207..212], [213..217, 210..215], [218..222, 213..218], [223..227, 216..221], [228..232, 219..224], [233..237, 222..227], [238..242, 225..230], [243..247, 228..233], [248..252, 231..236], [253..257, 234..239], [258..262, 237..242], [263..267, 240..245], [268..272, 243..248]],
      "E" => [[193..197, 204..209], [198..202, 207..212], [203..207, 210..215], [208..212, 213..218], [213..217, 216..221], [218..222, 219..224], [223..227, 222..227], [228..232, 225..230], [233..237, 228..233], [238..242, 231..236], [243..247, 234..239], [248..252, 237..242], [253..257, 240..245], [258..262, 243..248], [263..267, 246..251], [268..272, 249..254]],
      "2E" => [[193..197, 210..215], [198..202, 213..218], [203..207, 216..221], [208..212, 219..224], [213..217, 222..227], [218..222, 225..230], [223..227, 228..233], [228..232, 231..236], [233..237, 234..239], [238..242, 237..242], [243..247, 240..245], [248..252, 243..248], [253..257, 246..251], [258..262, 249..254], [263..267, 252..257], [268..272, 255..260]],
      "3E" => [[193..197, 216..221], [198..202, 219..224], [203..207, 222..227], [208..212, 225..230], [213..217, 228..233], [218..222, 231..236], [223..227, 234..239], [228..232, 237..242], [233..237, 240..245], [238..242, 243..248], [243..247, 246..251], [248..252, 249..254], [253..257, 252..257], [258..262, 255..260], [263..267, 258..263], [268..272, 261..266]],
      "4E" => [[193..197, 222..227], [198..202, 225..230], [203..207, 228..233], [208..212, 231..236], [213..217, 234..239], [218..222, 237..242], [223..227, 240..245], [228..232, 243..248], [233..237, 246..251], [238..242, 249..254], [243..247, 252..257], [248..252, 255..260], [253..257, 258..263], [258..262, 261..266], [263..267, 264..269], [268..272, 267..272]],
      "F" => [[193..197, 228..233], [198..202, 231..236], [203..207, 234..239], [208..212, 237..242], [213..217, 240..245], [218..222, 243..248], [223..227, 246..251], [228..232, 249..254], [233..237, 252..257], [238..242, 255..260], [243..247, 258..263], [248..252, 261..266], [253..257, 264..269], [258..262, 267..272], [263..267, 270..275], [268..272, 273..278]]
    }
  end

  def girth_chart_male
    {
      "A" => [[198..202, 186..191], [203..207, 189..194], [208..212, 192..197], [213..217, 195..200], [218..222, 198..203], [223..227, 201..206], [228..232, 204..209], [233..237, 207..212], [238..242, 210..215], [243..247, 213..218], [248..252, 216..221], [253..257, 219..224], [258..262, 222..227], [263..267, 225..230], [268..272, 228..233], [273..277, 231..236], [278..282, 234..239], [283..287, 237..242], [288..292, 240..245], [293..297, 243..248], [298..302, 246..251], [303..307, 249..254]],
      "B" => [[198..202, 192..197], [203..207, 195..200], [208..212, 198..203], [213..217, 201..206], [218..222, 204..209], [223..227, 207..212], [228..232, 210..215], [233..237, 213..218], [238..242, 216..221], [243..247, 219..224], [248..252, 222..227], [253..257, 225..230], [258..262, 228..233], [263..267, 231..236], [268..272, 234..239], [273..277, 237..242], [278..282, 240..245], [283..287, 243..248], [288..292, 246..251], [293..297, 249..254], [298..302, 252..257], [303..307, 255..260]],
      "C" => [[198..202, 198..203], [203..207, 201..206], [208..212, 204..209], [213..217, 207..212], [218..222, 210..215], [223..227, 213..218], [228..232, 216..221], [233..237, 219..224], [238..242, 222..227], [243..247, 225..230], [248..252, 228..233], [253..257, 231..236], [258..262, 234..239], [263..267, 237..242], [268..272, 240..245], [273..277, 243..248], [278..282, 246..251], [283..287, 249..254], [288..292, 252..257], [293..297, 255..260], [298..302, 258..263], [303..307, 261..266]],
      "D" => [[198..202, 204..209], [203..207, 207..212], [208..212, 210..215], [213..217, 213..218], [218..222, 216..221], [223..227, 219..224], [228..232, 222..227], [233..237, 225..230], [238..242, 228..233], [243..247, 231..236], [248..252, 234..239], [253..257, 237..242], [258..262, 240..245], [263..267, 243..248], [268..272, 246..251], [273..277, 249..254], [278..282, 252..257], [283..287, 255..260], [288..292, 258..263], [293..297, 261..266], [298..302, 264..269], [303..307, 267..272]],
      "E" => [[198..202, 210..215], [203..207, 213..218], [208..212, 216..221], [213..217, 219..224], [218..222, 222..227], [223..227, 215..230], [228..232, 228..233], [233..237, 231..236], [238..242, 234..239], [243..247, 237..242], [248..252, 240..245], [253..257, 243..248], [258..262, 246..251], [263..267, 249..254], [268..272, 252..257], [273..277, 255..260], [278..282, 258..263], [283..287, 261..266], [288..292, 264..269], [293..297, 267..272], [298..302, 270..275], [303..307, 273..278]],
      "2E" => [[198..202, 216..221], [203..207, 219..224], [208..212, 222..227], [213..217, 225..230], [218..222, 228..233], [223..227, 231..236], [228..232, 234..239], [233..237, 237..242], [238..242, 240..245], [243..247, 243..248], [248..252, 246..251], [253..257, 249..254], [258..262, 252..257], [263..267, 255..260], [268..272, 258..263], [273..277, 261..266], [278..282, 264..269], [283..287, 267..272], [288..292, 270..275], [293..297, 273..278], [298..302, 276..281], [303..307, 279..284]],
      "3E" => [[198..202, 222..227], [203..207, 225..230], [208..212, 228..232], [213..217, 231..236], [218..222, 234..239], [223..227, 237..242], [228..232, 240..245], [233..237, 243..248], [238..242, 246..251], [243..247, 249..254], [248..252, 252..257], [253..257, 255..260], [258..262, 258..263], [263..267, 261..266], [268..272, 264..269], [273..277, 267..272], [278..282, 270..275], [283..287, 273..278], [288..292, 276..281], [293..297, 279..284], [298..302, 282..287], [303..307, 285..290]],
      "4E" => [[198..202, 228..233], [203..207, 231..236], [208..212, 234..239], [213..217, 237..242], [218..222, 240..245], [223..227, 243..248], [228..232, 246..251], [233..237, 249..254], [238..242, 252..257], [243..247, 255..260], [248..252, 258..263], [253..257, 261..266], [258..262, 264..269], [263..267, 267..272], [268..272, 270..275], [273..277, 273..278], [278..282, 276..281], [283..287, 279..284], [288..292, 282..287], [293..297, 285..290], [298..302, 288..293], [303..307, 291..296]],
      "F" => [[198..202, 234..239], [203..207, 237..242], [208..212, 240..245], [213..217, 243..248], [218..222, 246..251], [223..227, 249..254], [228..232, 252..257], [233..237, 255..260], [238..242, 258..263], [243..247, 261..266], [248..252, 264..269], [253..257, 267..272], [258..262, 270..275], [263..267, 273..278], [268..272, 276..281], [273..277, 279..284], [278..282, 282..287], [283..287, 285..290], [288..292, 288..293], [293..297, 291..296], [298..302, 294..299], [303..307, 297..302]],
      "G" => [[198..202, 240..245], [203..207, 243..246], [208..212, 246..251], [213..217, 249..254], [218..222, 252..257], [223..227, 255..260], [228..232, 258..263], [233..237, 261..266], [238..242, 264..269], [243..247, 267..272], [248..252, 270..275], [253..257, 273..278], [258..262, 276..281], [263..267, 279..284], [268..272, 282..287], [273..277, 285..290], [278..282, 288..293], [283..287, 291..296], [288..292, 294..299], [293..297, 297..302], [298..302, 300..305], [303..307, 303..308]]
    }
  end

  def girth_chart_kids
    {
      "A" => [[103..107, 89..94], [108..112, 93..98], [113..117, 97..102], [118..122, 101..106], [123..127, 105..110], [128..132, 109..114], [133..137, 113..118], [138..142, 117..122], [143..147, 121..126], [148..152, 125..130], [153..157, 129..134], [158..162, 133..138], [163..167, 137..142], [168..172, 141..146], [173..177, 145..150], [178..182, 149..154], [183..187, 153..158], [188..192, 157..162], [193..197, 161..166], [198..202, 165..170], [203..207, 169..174], [208..212, 173..178], [213..217, 177..182], [218..222, 181..186], [223..227, 185..190], [228..232, 189..194], [233..237, 193..198], [238..242, 197..202], [243..247, 201..206], [248..252, 205..210], [253..257, 211..216], [258..262, 213..218]],
      "B" => [[103..107, 95..100], [108..112, 99..104], [113..117, 103..108], [118..122, 107..112], [123..127, 111..116], [128..132, 115..120], [133..137, 119..124], [138..142, 123..128], [143..147, 127..132], [148..152, 131..136], [153..157, 135..140], [158..162, 139..144], [163..167, 143..148], [168..172, 147..152], [173..177, 151..156], [178..182, 155..160], [183..187, 159..164], [188..192, 163..168], [193..197, 167..172], [198..202, 171..176], [203..207, 175..180], [208..212, 179..184], [213..217, 183..188], [218..222, 187..192], [223..227, 191..196], [228..232, 195..200], [233..237, 199..204], [238..242, 203..208], [243..247, 207..212], [248..252, 211..216], [253..257, 215..220], [258..262, 219..224]],
      "C" => [[103..107, 101..106], [108..112, 105..110], [113..117, 109..114], [118..122, 113..118], [123..127, 117..122], [128..132, 121..126], [133..137, 125..130], [138..142, 129..134], [143..147, 133..138], [148..152, 137..142], [153..157, 141..146], [158..162, 145..150], [163..167, 149..154], [168..172, 153..158], [173..177, 157..162], [178..182, 161..166], [183..187, 165..170], [188..192, 169..174], [193..197, 173..178], [198..202, 177..182], [203..207, 181..186], [208..212, 185..190], [213..217, 189..194], [218..222, 193..198], [223..227, 197..202], [228..232, 201..206], [233..237, 205..210], [238..242, 209..214], [243..247, 213..218], [248..252, 217..222], [253..257, 221..226], [258..262, 225..230]],
      "D" => [[103..107, 107..112], [108..112, 111..116], [113..117, 115..120], [118..122, 119..124], [123..127, 123..128], [128..132, 127..132], [133..137, 131..136], [138..142, 135..140], [143..147, 139..144], [148..152, 143..148], [153..157, 147..152], [158..162, 151..156], [163..167, 155..160], [168..172, 159..164], [173..177, 163..168], [178..182, 167..172], [183..187, 171..176], [188..192, 175..180], [193..197, 179..184], [198..202, 183..188], [203..207, 187..192], [208..212, 191..196], [213..217, 195..200], [218..222, 199..204], [223..227, 203..208], [228..232, 207..212], [233..237, 211..216], [238..242, 215..220], [243..247, 219..224], [248..252, 223..228], [253..257, 227..232], [258..262, 231..236]],
      "E" => [[103..107, 113..118], [108..112, 117..122], [113..117, 121..126], [118..122, 125..130], [123..127, 129..134], [128..132, 133..138], [133..137, 137..142], [138..142, 141..146], [143..147, 145..150], [148..152, 149..154], [153..157, 153..158], [158..162, 157..162], [163..167, 161..166], [168..172, 165..170], [173..177, 169..174], [178..182, 173..178], [183..187, 177..182], [188..192, 181..186], [193..197, 185..190], [198..202, 189..194], [203..207, 193..198], [208..212, 197..202], [213..217, 201..206], [218..222, 205..210], [223..227, 209..214], [228..232, 213..218], [233..237, 217..222], [238..242, 221..226], [243..247, 225..230], [248..252, 229..234], [253..257, 233..238], [258..262, 237..242]],
      "2E" => [[103..107, 119..124], [108..112, 123..128], [113..117, 127..132], [118..122, 131..136], [123..127, 135..140], [128..132, 139..144], [133..137, 143..148], [138..142, 147..152], [143..147, 151..156], [148..152, 155..160], [153..157, 159..164], [158..162, 163..168], [163..167, 167..172], [168..172, 171..176], [173..177, 175..180], [178..182, 179..184], [183..187, 183..188], [188..192, 187..192], [193..197, 191..196], [198..202, 195..200], [203..207, 199..204], [208..212, 203..208], [213..217, 207..212], [218..222, 211..216], [223..227, 215..220], [228..232, 219..224], [233..237, 223..228], [238..242, 227..232], [243..247, 231..236], [248..252, 235..240], [253..257, 239..244], [258..262, 243..248]],
      "3E" => [[103..107, 125..130], [108..112, 129..134], [113..117, 133..138], [118..122, 137..142], [123..127, 141..146], [128..132, 145..150], [133..137, 149..154], [138..142, 153..158], [143..147, 157..162], [148..152, 161..166], [153..157, 165..170], [158..162, 169..174], [163..167, 173..178], [168..172, 177..182], [173..177, 181..186], [178..182, 185..190], [183..187, 189..194], [188..192, 193..198], [193..197, 197..202], [198..202, 201..206], [203..207, 205..210], [208..212, 209..214], [213..217, 213..218], [218..222, 217..222], [223..227, 221..226], [228..232, 225..230], [233..237, 229..234], [238..242, 233..238], [243..247, 237..242], [248..252, 241..246], [253..257, 245..250], [258..262, 249..254]],
      "4E" => [[103..107, 131..136], [108..112, 135..140], [113..117, 139..144], [118..122, 143..148], [123..127, 147..152], [128..132, 151..156], [133..137, 155..160], [138..142, 159..164], [143..147, 163..168], [148..152, 167..172], [153..157, 171..176], [158..162, 175..180], [163..167, 179..184], [168..172, 183..188], [173..177, 187..192], [178..182, 191..196], [183..187, 195..200], [188..192, 199..204], [193..197, 203..208], [198..202, 207..212], [203..207, 211..216], [208..212, 215..220], [213..217, 219..224], [218..222, 223..228], [223..227, 227..232], [228..232, 231..236], [233..237, 235..240], [238..242, 239..244], [243..247, 243..248], [248..252, 247..252], [253..257, 251..256], [258..262, 255..260]],
      "F" => [[103..107, 137..142], [108..112, 141..146], [113..117, 145..150], [118..122, 149..154], [123..127, 153..158], [128..132, 157..162], [133..137, 161..166], [138..142, 165..170], [143..147, 169..174], [148..152, 173..178], [153..157, 177..182], [158..162, 181..186], [163..167, 185..190], [168..172, 189..194], [173..177, 193..198], [178..182, 197..202], [183..187, 201..206], [188..192, 205..210], [193..197, 209..214], [198..202, 213..218], [203..207, 217..222], [208..212, 221..226], [213..217, 225..230], [218..222, 229..234], [223..227, 233..238], [228..232, 237..242], [233..237, 241..246], [238..242, 245..250], [243..247, 249..254], [248..252, 253..258], [253..257, 257..262], [258..262, 261..266]],
      "G" => [[103..107, 143..148], [108..112, 147..152], [113..117, 151..156], [118..122, 155..160], [123..127, 159..164], [128..132, 163..168], [133..137, 167..172], [138..142, 171..176], [143..147, 175..180], [148..152, 179..184], [153..157, 183..188], [158..162, 187..192], [163..167, 191..196], [168..172, 195..200], [173..177, 199..204], [178..182, 203..208], [183..187, 207..212], [188..192, 211..216], [193..197, 215..220], [198..202, 219..224], [203..207, 223..228], [208..212, 227..232], [213..217, 231..236], [218..222, 235..240], [223..227, 239..244], [228..232, 243..248], [233..237, 247..252], [238..242, 251..256], [243..247, 255..260], [248..252, 259..264], [253..257, 263..268], [258..262, 267..272]]
    } 
  end
end
